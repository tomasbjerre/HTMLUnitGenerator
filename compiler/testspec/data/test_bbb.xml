<paths>
 <path id="campaignmodule">
  /html/body/div[2]/div/div[2]/div[2]/div/div[3]
 </path>
 <path id="searchpopup">
  //*[@id="modalbox-inner"]
 </path>
 <path id="_eventId_search">
  //*[@id="_eventId_search"]
 </path>
 <path id="campaignModuleChoose">
  /html/body/div[2]/div/div[2]/div[2]/div/div[3]/div/span/a/span
 </path>
</paths>

<urls>
 <url id="baspaket">
  http://www.bredbandsbolaget.se/tv/kanalpaket/baspaket.html
 </url>
</urls>

<flow>  
  <state id="start">
    <transition to="campaignmodulestate" using="baspaket" />
  </state>

  <state id="campaignmodulestate">
    <find path="campaignmodule">
      <tag type="a">
        <attribute name="href" value="/servlet/orderflow/search/search-flow?Id=tcm:142-23371" />
      </tag>
    </find>

    <transition to="searchflow" using="campaignModuleChoose" />
  </state>

  <state id="searchflow">
    <find path="searchpopup">
      <tag type="input">
        <attribute name="id" value="_eventId_search" />
      </tag>
    </find>

    <form id="locationForm" submit="_eventId_search">
      <input name="_eventId" value="search" />
      <input name="phoneNumber.fullNumber" value="0768966787" />
    </form>

    <transition to="selectfloor" using="locationForm" />
  </state>

  <state id="selectfloor">
    <find path="searchpopup">
      <tag type="input">
        <attribute name="id" value="_eventId_search" />
      </tag>
    </find>
    
    <form id="locationForm" submit="_eventId_search">
        <input name="address.floor" value="3" />
    </form>
   
    <transition to="searchresults" using="locationForm" />
  </state>

  <state id="searchresults">
    <find path="searchpopup">
      <tag type="a">
        <attribute name="href" value="/orderflow/index.html?Id=tcm:142-23381&fromSearch&page=new" />
      </tag>
    </find>
  </state>
</flow>
